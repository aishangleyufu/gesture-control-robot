#include"init.h"
#include"stc15f2k60s2.h"
void UARTinit(void)
{
SCON=0X50;//8位UART，波特率可调，打开接受
AUXR&=0XF7;//定时器二做定时器
AUXR|=0X04;//定时器二不分频
AUXR|=0X10;//打开定时器2
AUXR=0X14;
AUXR|=0X01;//选择定时器2作为串口1的波特率发生器
PS=1;//串口中断优先级为0
ES=1;//允许串口中断
T2H=255;
T2L=255-52;
EA=1;
}

void TIMEinit(void)
{
CLK_DIV&=0XF8;//使得最后3位为0，系统时钟不分频，为24MHz
TCON=0X00;
AUXR=0X00;//定时器1,2，12分频  为2MHz
INT_CLKO=0X00;
TMOD=0X11;//定时器1,2.打开，设为定时器，16位不可重装载模式，
TH0=(65535-10000)/256;
TL0=(65535-10000)%256;
TH1=(65535-10000)/256;
TL1=(65535-10000)%256; //初始设置定时器周期为1MHZ/5000=200HZ,这样再分四分，则恰好为50HZ
ET1=1;
ET0=1;	   //定时器中断打开
PT1=0;
PT0=0;	  //定时器中断优先级最高	 
EA=1;		//中断总开关打开
TR0=1;
TR1=1;	   //定时器打开		  

}	  